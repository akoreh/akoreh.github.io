import{f as R,g as j,h as C,r as m,t as O}from"./chunk-5ZG7U643.js";import{c as P}from"./chunk-GDYCGFDN.js";import"./chunk-K66EXUFO.js";import{l as N}from"./chunk-WSO2QVS5.js";import"./chunk-5RVANUM6.js";import{f as F,n as E}from"./chunk-NJPGD756.js";import{Cb as u,Eb as l,La as i,Ob as A,Qb as S,Vb as b,X as x,_a as f,ba as r,fc as T,ga as w,gc as k,ha as I,kb as D,lb as g,mb as h,rb as s,sa as _,sb as c,tb as d,ub as y,zb as M}from"./chunk-G7STBN2K.js";var B=(()=>{class e{isTouchDevice;isSafari;isIos;isAndroid;constructor(){this.isTouchDevice=this.detectTouchDevice(),this.isSafari=this.platform.SAFARI,this.isIos=this.platform.IOS,this.isAndroid=this.platform.ANDROID}platform=r(C);detectTouchDevice=()=>"ontouchstart"in window||navigator.maxTouchPoints>0;static \u0275fac=function(n){return new(n||e)};static \u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var q=e=>({"font-bold":e}),G=e=>({"bg-secondary-blue text-white":e});function K(e,v){if(e&1&&y(0,"ps-icon",1),e&2){let o=l();s("icon",o.icon().name)}}function L(e,v){if(e&1&&y(0,"img",2),e&2){let o=l();s("ngSrc",o.icon().src)("alt",o.name())}}var V=(()=>{class e{static nextId=0;platformService=r(B);id=`ps-desktop-icon-${e.nextId++}`;name=k.required();icon=k.required();open=T();isFocused=_(!1);position=_({x:0,y:0});onFocus(){this.isFocused.set(!0)}onBlur(){this.isFocused.set(!1)}onKeyDown(o){o.key==="Enter"&&(o.stopPropagation(),this.isFocused.set(!1),this.open.emit())}onDragEnded(o){let{x:n,y:t}=o.source.getFreeDragPosition();this.position.set({x:n,y:t})}onClick(o){o.stopPropagation(),this.platformService.isTouchDevice?(this.isFocused.set(!1),this.open.emit()):this.isFocused.set(!0)}onDoubleClick(o){o.stopPropagation(),this.isFocused.set(!1),this.open.emit()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=f({type:e,selectors:[["ps-desktop-icon"]],inputs:{name:[1,"name"],icon:[1,"icon"]},outputs:{open:"open"},decls:6,vars:13,consts:[["cdkDrag","","data-testid","button","aria-roledescription","Desktop item","type","button",1,"flex","w-full","max-w-16","cursor-pointer","flex-col","items-center","gap-1","p-1","outline-none","focus:outline-none","focus-visible:outline-none",3,"cdkDragEnded","focus","blur","keydown","click","dblclick","ngClass","cdkDragFreeDragPosition"],["data-testid","icon",1,"text-window-border","h-10","w-10","sm:h-12","sm:w-12",3,"icon"],["data-testid","icon","width","48","height","48","priority","",1,"h-10","w-10","rounded-lg","sm:h-12","sm:w-12",3,"ngSrc","alt"],[1,"flex","h-3.5","items-center","justify-center","rounded-sm","px-1","py-0.5","text-center","transition-all","duration-100","ease-in",3,"ngClass"],["data-testid","name",1,"text-xs","font-semibold","whitespace-nowrap","select-none"]],template:function(n,t){n&1&&(c(0,"button",0),u("cdkDragEnded",function(p){return t.onDragEnded(p)})("focus",function(){return t.onFocus()})("blur",function(){return t.onBlur()})("keydown",function(p){return t.onKeyDown(p)})("click",function(p){return t.onClick(p)})("dblclick",function(p){return t.onDoubleClick(p)}),g(1,K,1,1,"ps-icon",1)(2,L,1,2,"img",2),c(3,"div",3)(4,"span",4),A(5),d()()()),n&2&&(s("ngClass",b(9,q,t.isFocused()))("cdkDragFreeDragPosition",t.position()),D("aria-label",t.name())("aria-selected",t.isFocused()?"true":"false")("aria-describedby",t.id+"-label"),i(),h(t.icon().type==="svg"?1:2),i(2),s("ngClass",b(11,G,t.isFocused())),i(),D("id",t.id+"-label"),i(),S(" ",t.name()," "))},dependencies:[F,E,P,O],encapsulation:2,changeDetection:0})}return e})();function J(e,v){if(e&1){let o=M();c(0,"li")(1,"ps-desktop-icon",4),u("open",function(){w(o);let t=l();return I(t.windowManager.openApp(t.groceryApp.id))}),d()()}if(e&2){let o=l();i(),s("icon",o.groceryApp.metadata.icon)}}var ge=(()=>{class e{AppId=m;windowManager=r(j);authStore=r(N);isAuthenticated=this.authStore.isAuthenticated;appRegistry=r(R);resumeApp=this.appRegistry.getApp(m.Resume);jsEngineApp=this.appRegistry.getApp(m.JsEngine);coinMasterApp=this.appRegistry.getApp(m.CoinMaster);groceryApp=this.appRegistry.getApp(m.Grocee);static \u0275fac=function(n){return new(n||e)};static \u0275cmp=f({type:e,selectors:[["ps-desktop-manager"]],decls:6,vars:2,consts:[["data-testid","desktopManager",1,"relative","h-full","w-full"],[1,"absolute","top-0","right-0"],[1,"flex","flex-col","gap-4","p-2","sm:gap-6","sm:p-4"],["name","Coin Master",3,"open","icon"],["name","Grocee",3,"open","icon"]],template:function(n,t){n&1&&(c(0,"div",0)(1,"div",1)(2,"ul",2)(3,"li")(4,"ps-desktop-icon",3),u("open",function(){return t.windowManager.openApp(t.coinMasterApp.id)}),d()(),g(5,J,2,1,"li"),d()()()),n&2&&(i(4),s("icon",t.coinMasterApp.metadata.icon),i(),h(t.isAuthenticated()?5:-1))},dependencies:[V],styles:['.folder[_ngcontent-%COMP%]{position:relative;width:60px;height:40px;background:#f9c441;border:2px solid #000;border-radius:2px;box-shadow:2px 2px #000}.folder[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-11px;left:-2px;border:2px solid #000;height:14px;width:30px;z-index:-1;background:#f9c441}'],changeDetection:0})}return e})();export{ge as DesktopManagerComponent};
