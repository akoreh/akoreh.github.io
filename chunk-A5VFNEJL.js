import{a as oe,h as re,l as se}from"./chunk-B7QPIROU.js";import{a as b}from"./chunk-N65IACZ3.js";import{d as U}from"./chunk-FEL4HEVV.js";import"./chunk-QHARAMKU.js";import{m as le}from"./chunk-7CI2AOPO.js";import"./chunk-5RVANUM6.js";import{a as A}from"./chunk-YBT3GKD7.js";import"./chunk-HWJUYKM7.js";import{Ab as Z,Db as u,Eb as N,Fb as a,Jb as ee,Ka as X,Kb as te,L as E,La as l,Mb as H,Nb as B,Pb as d,Qb as ie,Rb as k,Sb as z,Tb as O,Ub as K,X as J,_a as v,a as R,b as F,ba as x,fc as D,ga as m,ha as p,hc as h,ia as V,ic as I,ja as q,jc as ne,kb as Y,lb as g,ma as T,mb as f,pb as P,qb as W,rb as y,sa as _,sb as s,tb as o,ub as M,vb as C,wb as L,xb as G,zb as w}from"./chunk-2EGVZQJG.js";var j=(()=>{class n{http=x(oe);environment=x(re);url=`${this.environment.api}/grocery-lists`;getAllLists(){return this.http.get(this.url)}getList(e){return this.http.get(`${this.url}/${e}`)}createList(e){return this.http.post(this.url,e)}updateList(e,i){return this.http.patch(`${this.url}/${e}`,i)}deleteList(e){return this.http.delete(`${this.url}/${e}`)}addItem(e,i){return this.http.post(`${this.url}/${e}/items`,i)}updateItem(e,i,t){return this.http.patch(`${this.url}/${e}/items/${i}`,t)}deleteItem(e,i){return this.http.delete(`${this.url}/${e}/items/${i}`)}reorderItems(e,i){return this.http.post(`${this.url}/${e}/items/reorder`,i)}addCollaborator(e,i){return this.http.post(`${this.url}/${e}/collaborators`,i)}removeCollaborator(e,i){return this.http.delete(`${this.url}/${e}/collaborators/${i}`)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ae=(()=>{class n{groceeService=x(j);destroyRef=x(T);cancelled=h();created=h();listName=_("");isCreating=_(!1);onCreate(){let e=this.listName().trim();e&&(this.isCreating.set(!0),this.groceeService.createList({name:e}).pipe(E(()=>this.isCreating.set(!1)),b(this.destroyRef)).subscribe(i=>{this.created.emit(i.id)}))}onKeyDown(e){e.key==="Enter"&&this.listName().trim()?this.onCreate():e.key==="Escape"&&this.cancelled.emit()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=v({type:n,selectors:[["ps-grocee-create-list-view"]],outputs:{cancelled:"cancelled",created:"created"},decls:11,vars:3,consts:[["data-testid","createListView",1,"flex","h-full","w-full","flex-col","gap-3","@sm:gap-4"],[1,"flex","items-center","gap-2"],["data-testid","backButton","aria-label","Go back","type","button",1,"flex","h-8","w-8","shrink-0","cursor-pointer","items-center","justify-center","rounded-lg","border","border-gray-300","bg-white","transition-colors","hover:bg-gray-100",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-lg","font-bold","@sm:text-xl"],[1,"flex","flex-1","flex-col","gap-4"],["data-testid","listNameInput","placeholder","List name...",3,"valueChange","keydown","value"],["data-testid","createButton","variant","primary",1,"w-full",3,"clicked","loading","disabled"]],template:function(i,t){i&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),u("click",function(){return t.cancelled.emit()}),V(),s(3,"svg",3),M(4,"path",4),o()(),q(),s(5,"h1",5),d(6,"Create New List"),o()(),s(7,"div",6)(8,"ps-input",7),K("valueChange",function(S){return O(t.listName,S)||(t.listName=S),S}),u("keydown",function(S){return t.onKeyDown(S)}),o(),s(9,"ps-button",8),u("clicked",function(){return t.onCreate()}),d(10," Create List "),o()()()),i&2&&(l(8),z("value",t.listName),l(),y("loading",t.isCreating())("disabled",!t.listName().trim()))},dependencies:[A,U],encapsulation:2,changeDetection:0})}return n})();function ue(n,c){n&1&&(V(),C(0,"svg",2),G(1,"path",8),L())}function _e(n,c){if(n&1&&G(0,"img",3),n&2){let e=a();Z("src",e.item().image,X)("alt",e.item().name)}}var ce=(()=>{class n{item=I.required();toggle=h();delete=h();isBought=D(()=>this.item().isBought);static \u0275fac=function(i){return new(i||n)};static \u0275cmp=v({type:n,selectors:[["ps-grocee-item"]],inputs:{item:[1,"item"]},outputs:{toggle:"toggle",delete:"delete"},decls:9,vars:18,consts:[["data-testid","groceryItem",1,"group","flex","items-center","gap-2","rounded-lg","border","border-gray-200","bg-white","p-2","transition-all","@sm:gap-3","@sm:p-3"],["data-testid","toggleButton","type","button",1,"flex","h-6","w-6","shrink-0","cursor-pointer","items-center","justify-center","rounded-full","border-2","transition-all","@sm:h-7","@sm:w-7",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","text-white"],["data-testid","itemImage",1,"h-8","w-8","shrink-0","rounded","object-cover","@sm:h-10","@sm:w-10",3,"src","alt"],["data-testid","itemName",1,"min-w-0","flex-1","truncate","text-sm","@sm:text-base"],["data-testid","deleteItemButton","aria-label","Delete item","type","button",1,"shrink-0","rounded","p-1","text-gray-400","opacity-0","transition-opacity","group-hover:opacity-100","hover:bg-red-100","hover:text-red-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3","d","M5 13l4 4L19 7"]],template:function(i,t){i&1&&(C(0,"div",0)(1,"button",1),N("click",function(){return t.toggle.emit()}),g(2,ue,2,0,":svg:svg",2),L(),g(3,_e,1,2,"img",3),C(4,"span",4),d(5),L(),C(6,"button",5),N("click",function(){return t.delete.emit()}),V(),C(7,"svg",6),G(8,"path",7),L()()()),i&2&&(B("opacity-60",t.isBought())("bg-green-50",t.isBought()),l(),B("border-gray-300",!t.isBought())("border-accent-green",t.isBought())("bg-accent-green",t.isBought()),Y("aria-label",t.isBought()?"Mark as not bought":"Mark as bought"),l(),f(t.isBought()?2:-1),l(),f(t.item().image?3:-1),l(),B("line-through",t.isBought())("text-gray-500",t.isBought()),l(),k(" ",t.item().name," "))},encapsulation:2,changeDetection:0})}return n})();var de=(n,c)=>c.id;function ge(n,c){n&1&&(s(0,"h1",5),d(1),o()),n&2&&(l(),k(" ",c.name," "))}function fe(n,c){n&1&&(s(0,"div",6)(1,"span",8),d(2,"Loading..."),o()())}function Ce(n,c){n&1&&(s(0,"div",12)(1,"div",18),d(2,"\u{1F4DD}"),o(),s(3,"p",19),d(4," No items yet. Add your first item! "),o()())}function he(n,c){if(n&1){let e=w();s(0,"ps-grocee-item",21),u("toggle",function(){let t=m(e).$implicit,r=a(3);return p(r.onToggleItem(t))})("delete",function(){let t=m(e).$implicit,r=a(3);return p(r.onDeleteItem(t.id))}),o()}if(n&2){let e=c.$implicit;y("item",e)}}function xe(n,c){if(n&1&&(s(0,"div",13),P(1,he,1,1,"ps-grocee-item",20,de),o()),n&2){let e=a(2);l(),W(e.sortedItems())}}function we(n,c){n&1&&(s(0,"p",30),d(1," No collaborators yet. Invite someone! "),o())}function ve(n,c){if(n&1){let e=w();s(0,"li",32)(1,"span",33),d(2),o(),s(3,"button",34),u("click",function(){let t=m(e).$implicit,r=a(5);return p(r.onRemoveCollaborator(t.id))}),d(4," Remove "),o()()}if(n&2){let e=c.$implicit;l(2),ie(e.email)}}function be(n,c){if(n&1&&(s(0,"ul",31),P(1,ve,5,1,"li",32,de),o()),n&2){let e=a(3);l(),W(e.collaborators)}}function ye(n,c){if(n&1){let e=w();s(0,"div",26)(1,"div",27)(2,"ps-input",28),K("valueChange",function(t){m(e);let r=a(3);return O(r.collaboratorEmail,t)||(r.collaboratorEmail=t),p(t)}),u("keydown",function(t){m(e);let r=a(3);return p(r.onCollaboratorKeyDown(t))}),o(),s(3,"ps-button",29),u("clicked",function(){m(e);let t=a(3);return p(t.onAddCollaborator())}),d(4," Invite "),o()(),g(5,we,2,0,"p",30)(6,be,3,0,"ul",31),o()}if(n&2){let e=a(2),i=a();l(2),z("value",i.collaboratorEmail),l(),y("loading",i.isAddingCollaborator())("disabled",!i.collaboratorEmail().trim()),l(2),f(e.collaborators.length===0?5:6)}}function Le(n,c){if(n&1){let e=w();s(0,"div",17)(1,"button",22),u("click",function(){m(e);let t=a(2);return p(t.toggleCollaborators())}),s(2,"span",23),d(3),o(),V(),s(4,"svg",24),M(5,"path",25),o()(),g(6,ye,7,4,"div",26),o()}if(n&2){let e=a(),i=a();l(3),k(" \u{1F465} Collaborators (",e.collaborators.length,") "),l(),B("rotate-180",i.showCollaborators()),l(2),f(i.showCollaborators()?6:-1)}}function Se(n,c){if(n&1){let e=w();s(0,"div",7)(1,"div",1)(2,"div",9),M(3,"div",10),o(),s(4,"span",11),d(5),o()(),g(6,Ce,5,0,"div",12)(7,xe,3,0,"div",13),s(8,"div",14)(9,"ps-input",15),K("valueChange",function(t){m(e);let r=a();return O(r.newItemName,t)||(r.newItemName=t),p(t)}),u("keydown",function(t){m(e);let r=a();return p(r.onKeyDown(t))}),o(),s(10,"ps-button",16),u("clicked",function(){m(e);let t=a();return p(t.onAddItem())}),d(11," Add "),o()(),g(12,Le,7,4,"div",17),o()}if(n&2){let e=a();l(3),H("width",e.progress(),"%"),l(2),k(" ",e.progressText()," "),l(),f(e.sortedItems().length===0?6:7),l(3),z("value",e.newItemName),l(),y("loading",e.isAddingItem())("disabled",!e.newItemName().trim()),l(2),f(e.isOwner()?12:-1)}}var me=(()=>{class n{groceeService=x(j);destroyRef=x(T);authStore=x(se);listId=I.required();back=h();list=_(null);isLoading=_(!0);newItemName=_("");isAddingItem=_(!1);showCollaborators=_(!1);collaboratorEmail=_("");isAddingCollaborator=_(!1);isOwner=D(()=>{let e=this.list(),i=this.authStore.userId();return e!==null&&i!==null&&e.ownerId===i});sortedItems=D(()=>{let e=this.list();return e?[...e.items].sort((i,t)=>i.isBought!==t.isBought?i.isBought?1:-1:i.sortOrder-t.sortOrder):[]});progress=D(()=>{let e=this.list();if(!e||e.items.length===0)return 0;let i=e.items.filter(t=>t.isBought).length;return Math.round(i/e.items.length*100)});progressText=D(()=>{let e=this.list();return e?`${e.items.filter(t=>t.isBought).length}/${e.items.length}`:"0/0"});ngOnInit(){this.loadList()}loadList(){this.isLoading.set(!0),this.groceeService.getList(this.listId()).pipe(E(()=>this.isLoading.set(!1)),b(this.destroyRef)).subscribe(e=>this.list.set(e))}onAddItem(){let e=this.newItemName().trim();e&&(this.isAddingItem.set(!0),this.groceeService.addItem(this.listId(),{name:e}).pipe(E(()=>this.isAddingItem.set(!1)),b(this.destroyRef)).subscribe(i=>{this.list.update(t=>t&&F(R({},t),{items:[...t.items,i]})),this.newItemName.set("")}))}onToggleItem(e){this.groceeService.updateItem(this.listId(),e.id,[{op:"replace",path:"/isBought",value:!e.isBought}]).pipe(b(this.destroyRef)).subscribe(i=>{this.list.update(t=>t&&F(R({},t),{items:t.items.map(r=>r.id===i.id?i:r)}))})}onDeleteItem(e){this.groceeService.deleteItem(this.listId(),e).pipe(b(this.destroyRef)).subscribe(()=>{this.list.update(i=>i&&F(R({},i),{items:i.items.filter(t=>t.id!==e)}))})}onKeyDown(e){e.key==="Enter"&&this.onAddItem()}toggleCollaborators(){this.showCollaborators.update(e=>!e)}onAddCollaborator(){let e=this.collaboratorEmail().trim();e&&(this.isAddingCollaborator.set(!0),this.groceeService.addCollaborator(this.listId(),{email:e}).pipe(E(()=>this.isAddingCollaborator.set(!1)),b(this.destroyRef)).subscribe(i=>{this.list.set(i),this.collaboratorEmail.set("")}))}onRemoveCollaborator(e){this.groceeService.removeCollaborator(this.listId(),e).pipe(b(this.destroyRef)).subscribe(()=>{this.list.update(i=>i&&F(R({},i),{collaborators:i.collaborators.filter(t=>t.id!==e)}))})}onCollaboratorKeyDown(e){e.key==="Enter"&&this.onAddCollaborator()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=v({type:n,selectors:[["ps-grocee-list-detail-view"]],inputs:{listId:[1,"listId"]},outputs:{back:"back"},decls:8,vars:2,consts:[[1,"flex","h-full","w-full","flex-col","gap-3","@sm:gap-4"],[1,"flex","items-center","gap-2"],["data-testid","backButton","aria-label","Go back","type","button",1,"flex","h-8","w-8","shrink-0","cursor-pointer","items-center","justify-center","rounded-lg","border","border-gray-300","bg-white","transition-colors","hover:bg-gray-100",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],["data-testid","listTitle",1,"min-w-0","flex-1","truncate","text-lg","font-bold","@sm:text-xl"],["data-testid","loadingState",1,"flex","flex-1","items-center","justify-center"],[1,"flex","flex-1","flex-col","gap-3","@sm:gap-4"],[1,"text-gray-500"],[1,"h-2","flex-1","overflow-hidden","rounded-full","bg-gray-200"],[1,"bg-accent-green","h-full","rounded-full","transition-all"],["data-testid","progressText",1,"shrink-0","text-xs","text-gray-500","@sm:text-sm"],["data-testid","emptyState",1,"flex","flex-1","flex-col","items-center","justify-center","gap-2","text-center"],["data-testid","itemsList",1,"flex","flex-1","flex-col","gap-2","overflow-auto"],[1,"flex","shrink-0","gap-2"],["data-testid","newItemInput","placeholder","Add new item...",1,"flex-1",3,"valueChange","keydown","value"],["data-testid","addItemButton","variant","primary","size","sm",3,"clicked","loading","disabled"],[1,"mt-auto","shrink-0","border-t","border-gray-200","pt-3"],[1,"text-3xl"],[1,"text-sm","text-gray-500"],[3,"item"],[3,"toggle","delete","item"],["data-testid","collaboratorsToggle","type","button",1,"flex","w-full","cursor-pointer","items-center","justify-between","text-left",3,"click"],[1,"text-sm","font-medium","text-gray-700"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","text-gray-500","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["data-testid","collaboratorsPanel",1,"mt-3","flex","flex-col","gap-3"],[1,"flex","gap-2"],["data-testid","collaboratorEmailInput","placeholder","Email address...",1,"flex-1",3,"valueChange","keydown","value"],["data-testid","inviteCollaboratorButton","variant","secondary","size","sm",3,"clicked","loading","disabled"],[1,"text-center","text-xs","text-gray-500"],["data-testid","collaboratorsList",1,"flex","flex-col","gap-2"],[1,"flex","items-center","justify-between","rounded-lg","bg-gray-50","px-3","py-2"],[1,"truncate","text-sm"],["data-testid","removeCollaboratorButton","type","button",1,"shrink-0","cursor-pointer","text-xs","text-red-500","hover:text-red-700",3,"click"]],template:function(i,t){if(i&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),u("click",function(){return t.back.emit()}),V(),s(3,"svg",3),M(4,"path",4),o()(),g(5,ge,2,1,"h1",5),o(),g(6,fe,3,0,"div",6)(7,Se,13,8,"div",7),o()),i&2){let r,S;l(5),f((r=t.list())?5:-1,r),l(),f(t.isLoading()?6:(S=t.list())?7:-1,S)}},dependencies:[le,A,U,ce],encapsulation:2,changeDetection:0})}return n})();var pe=(()=>{class n{list=I.required();select=h();delete=h();progress=D(()=>{let e=this.list();return e.itemCount===0?0:Math.round(e.boughtCount/e.itemCount*100)});progressText=D(()=>{let e=this.list();return`${e.boughtCount}/${e.itemCount}`});static \u0275fac=function(i){return new(i||n)};static \u0275cmp=v({type:n,selectors:[["ps-grocee-list-card"]],inputs:{list:[1,"list"]},outputs:{select:"select",delete:"delete"},decls:14,vars:5,consts:[["data-testid","listCard","type","button",1,"group","hover:border-primary-blue","flex","w-full","cursor-pointer","flex-col","gap-2","rounded-lg","border-2","border-gray-300","bg-white","p-3","text-left","transition-all","hover:shadow-md","@sm:p-4",3,"click"],[1,"flex","w-full","items-start","justify-between","gap-2"],["data-testid","listName",1,"truncate","text-base","font-semibold","text-gray-800","@sm:text-lg"],["data-testid","deleteListButton","aria-label","Delete list","type","button",1,"shrink-0","rounded","p-1","text-gray-400","opacity-0","transition-opacity","group-hover:opacity-100","hover:bg-red-100","hover:text-red-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"flex","w-full","items-center","gap-2"],[1,"h-2","flex-1","overflow-hidden","rounded-full","bg-gray-200"],[1,"bg-accent-green","h-full","rounded-full","transition-all"],["data-testid","progressText",1,"shrink-0","text-xs","text-gray-500","@sm:text-sm"],[1,"text-xs","text-gray-400"]],template:function(i,t){i&1&&(C(0,"button",0),N("click",function(){return t.select.emit()}),C(1,"div",1)(2,"h3",2),d(3),L(),C(4,"button",3),N("click",function(S){return S.stopPropagation(),t.delete.emit()}),V(),C(5,"svg",4),G(6,"path",5),L()()(),q(),C(7,"div",6)(8,"div",7),G(9,"div",8),L(),C(10,"span",9),d(11),L()(),C(12,"p",10),d(13),L()()),i&2&&(l(3),k(" ",t.list().name," "),l(6),H("width",t.progress(),"%"),l(2),k(" ",t.progressText()," "),l(2),k(" ",t.list().ownerEmail," "))},encapsulation:2,changeDetection:0})}return n})();var Ve=(n,c)=>c.id;function ke(n,c){n&1&&(s(0,"div",4)(1,"span",7),d(2,"Loading lists..."),o()())}function De(n,c){if(n&1){let e=w();s(0,"div",5)(1,"div",8),d(2,"\u{1F6D2}"),o(),s(3,"p",7),d(4,"No grocery lists yet"),o(),s(5,"ps-button",9),u("clicked",function(){m(e);let t=a();return p(t.createList.emit())}),d(6," Create "),o()()}}function Ee(n,c){if(n&1){let e=w();s(0,"ps-grocee-list-card",11),u("select",function(){let t=m(e).$implicit,r=a(2);return p(r.selectList.emit(t.id))})("delete",function(){let t=m(e).$implicit,r=a(2);return p(r.onDeleteList(t.id))}),o()}if(n&2){let e=c.$implicit;y("list",e)}}function Ie(n,c){if(n&1&&(s(0,"div",6),P(1,Ee,1,1,"ps-grocee-list-card",10,Ve),o()),n&2){let e=a();l(),W(e.lists())}}var Q=(()=>{class n{groceeService=x(j);destroyRef=x(T);autoSelectSingle=I(!1);selectList=h();createList=h();lists=_([]);isLoading=_(!0);ngOnInit(){this.loadLists()}loadLists(){this.isLoading.set(!0),this.groceeService.getAllLists().pipe(E(()=>this.isLoading.set(!1)),b(this.destroyRef)).subscribe(e=>{this.lists.set(e),this.autoSelectSingle()&&e.length===1&&this.selectList.emit(e[0].id)})}onDeleteList(e){this.groceeService.deleteList(e).pipe(b(this.destroyRef)).subscribe(()=>{this.lists.update(i=>i.filter(t=>t.id!==e))})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=v({type:n,selectors:[["ps-grocee-lists-view"]],inputs:{autoSelectSingle:[1,"autoSelectSingle"]},outputs:{selectList:"selectList",createList:"createList"},decls:9,vars:1,consts:[[1,"flex","h-full","w-full","flex-col","gap-3","@sm:gap-4"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-bold","@sm:text-xl"],["data-testid","createListButton","variant","primary","size","sm",3,"clicked"],["data-testid","loadingState",1,"flex","flex-1","items-center","justify-center"],["data-testid","emptyState",1,"flex","flex-1","flex-col","items-center","justify-center","gap-3","text-center"],["data-testid","listsGrid",1,"grid","flex-1","auto-rows-min","gap-2","overflow-auto","@sm:grid-cols-2","@sm:gap-3","@lg:grid-cols-3"],[1,"text-gray-500"],[1,"text-4xl"],["variant","primary","size","sm",3,"clicked"],[3,"list"],[3,"select","delete","list"]],template:function(i,t){i&1&&(s(0,"div",0)(1,"div",1)(2,"h1",2),d(3,"My Lists"),o(),s(4,"ps-button",3),u("clicked",function(){return t.createList.emit()}),d(5," + New List "),o()(),g(6,ke,3,0,"div",4)(7,De,7,0,"div",5)(8,Ie,3,0,"div",6),o()),i&2&&(l(6),f(t.isLoading()?6:t.lists().length===0?7:8))},dependencies:[A,pe],encapsulation:2,changeDetection:0})}return n})();function Ge(n,c){if(n&1){let e=w();s(0,"ps-grocee-lists-view",2),u("selectList",function(t){m(e);let r=a();return p(r.onSelectList(t))})("createList",function(){m(e);let t=a();return p(t.onCreateList())}),o()}if(n&2){let e=a();y("autoSelectSingle",e.autoSelectSingle())}}function Te(n,c){if(n&1){let e=w();s(0,"ps-grocee-list-detail-view",4),u("back",function(){m(e);let t=a(2);return p(t.onBack())}),o()}n&2&&y("listId",c)}function Me(n,c){if(n&1&&g(0,Te,1,1,"ps-grocee-list-detail-view",3),n&2){let e,i=a();f((e=i.selectedListId())?0:-1,e)}}function Ne(n,c){if(n&1){let e=w();s(0,"ps-grocee-create-list-view",5),u("cancelled",function(){m(e);let t=a();return p(t.onCancelCreate())})("created",function(t){m(e);let r=a();return p(r.onListCreated(t))}),o()}}var Gt=(()=>{class n{listsView=ne(Q);currentView=_("lists");selectedListId=_(null);autoSelectSingle=_(!0);onSelectList(e){this.selectedListId.set(e),this.currentView.set("detail"),this.autoSelectSingle.set(!1)}onBack(){this.currentView.set("lists"),this.selectedListId.set(null),this.listsView()?.loadLists()}onCreateList(){this.currentView.set("create")}onListCreated(e){this.onSelectList(e)}onCancelCreate(){this.currentView.set("lists")}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=v({type:n,selectors:[["ps-grocee-app"]],viewQuery:function(i,t){i&1&&ee(t.listsView,Q,5),i&2&&te()},decls:4,vars:1,consts:[[1,"relative","flex","h-full","w-full","flex-col","p-2","@sm:p-4"],[3,"autoSelectSingle"],[3,"selectList","createList","autoSelectSingle"],[3,"listId"],[3,"back","listId"],[3,"cancelled","created"]],template:function(i,t){if(i&1&&(s(0,"div",0),g(1,Ge,1,1,"ps-grocee-lists-view",1)(2,Me,1,1)(3,Ne,1,0,"ps-grocee-create-list-view"),o()),i&2){let r;l(),f((r=t.currentView())==="lists"?1:r==="detail"?2:r==="create"?3:-1)}},dependencies:[Q,me,ae],encapsulation:2,changeDetection:0})}return n})();export{Gt as GroceeAppComponent};
