import{a as Q}from"./chunk-N7A2IJBE.js";import"./chunk-VLPVFQJS.js";import{Ab as S,Cb as w,Ia as i,Kb as _,Lb as I,Mb as a,Nb as D,Ob as m,Z as M,Za as d,da as P,dc as C,hc as p,jb as v,kb as k,lb as x,nb as y,ob as h,pb as f,qb as s,ra as g,rb as c,sb as b,tb as l,ub as r}from"./chunk-VXUXNVNJ.js";function J(o,u){o&1&&(l(0,"div",3),a(1,"Empty"),r())}function A(o,u){if(o&1&&(l(0,"div",5),a(1),r()),o&2){let t=u.$implicit,e=u.$index,n=w();_("animate-pulse",e===n.stack().length-1),i(),m(" ",t," ")}}var T=(()=>{class o{stack=p.required();static \u0275fac=function(e){return new(e||o)};static \u0275cmp=d({type:o,selectors:[["ps-call-stack"]],inputs:{stack:[1,"stack"]},decls:7,vars:1,consts:[[1,"bg-ps-background-secondary","border-ps-primary-yellow","shadow-retro","flex","h-full","flex-col","rounded-lg","border-2","p-4"],[1,"text-ps-primary-red","mb-4","text-lg","font-bold"],[1,"flex","flex-1","flex-col-reverse","gap-2","overflow-y-auto"],[1,"text-ps-text-muted","py-8","text-center","italic"],[1,"bg-ps-primary-yellow","border-ps-accent-gray","rounded","border-2","px-4","py-3","font-mono","text-sm","shadow-sm",3,"animate-pulse"],[1,"bg-ps-primary-yellow","border-ps-accent-gray","rounded","border-2","px-4","py-3","font-mono","text-sm","shadow-sm"]],template:function(e,n){e&1&&(l(0,"div",0)(1,"h3",1),a(2,"Call Stack"),r(),l(3,"div",2),v(4,J,2,0,"div",3),y(5,A,2,3,"div",4,x),r()()),e&2&&(i(4),k(n.stack().length===0?4:-1),i(),h(n.stack()))},encapsulation:2,changeDetection:0})}return o})();var B=(()=>{class o{code=p.required();static \u0275fac=function(e){return new(e||o)};static \u0275cmp=d({type:o,selectors:[["ps-code-display"]],inputs:{code:[1,"code"]},decls:6,vars:1,consts:[[1,"bg-ps-background-secondary","border-ps-primary-orange","shadow-retro","flex","h-full","flex-col","rounded-lg","border-2","p-4"],[1,"text-ps-primary-orange","mb-4","text-lg","font-bold"],[1,"text-ps-accent-green","border-ps-accent-gray","flex-1","overflow-auto","rounded","border","p-4","font-mono","text-sm","leading-relaxed"]],template:function(e,n){e&1&&(l(0,"div",0)(1,"h3",1),a(2,"JavaScript Code"),r(),l(3,"pre",2)(4,"code"),a(5),r()()()),e&2&&(i(5),D(n.code()))},encapsulation:2,changeDetection:0})}return o})();function $(o,u){o&1&&(l(0,"div",3),a(1," No output yet "),r())}function j(o,u){if(o&1&&(l(0,"div",4)(1,"span",5),a(2,"> "),r(),a(3),r()),o&2){let t=u.$implicit;i(3),m("",t," ")}}var F=(()=>{class o{output=p.required();static \u0275fac=function(e){return new(e||o)};static \u0275cmp=d({type:o,selectors:[["ps-console-output"]],inputs:{output:[1,"output"]},decls:7,vars:1,consts:[[1,"border-ps-accent-green","shadow-retro","flex","h-full","flex-col","rounded-lg","border-2","p-4"],[1,"text-ps-accent-green","mb-4","text-lg","font-bold"],[1,"flex","flex-1","flex-col","gap-1","overflow-y-auto","font-mono","text-sm"],[1,"text-ps-text-muted","py-8","text-center","italic"],[1,"text-ps-accent-green"],[1,"text-ps-text-muted"]],template:function(e,n){e&1&&(l(0,"div",0)(1,"h3",1),a(2,"Console Output"),r(),l(3,"div",2),v(4,$,2,0,"div",3),y(5,j,4,1,"div",4,x),r()()),e&2&&(i(4),k(n.output().length===0?4:-1),i(),h(n.output()))},encapsulation:2,changeDetection:0})}return o})();function z(o,u){o&1&&(l(0,"div",3),a(1,"Empty"),r())}function L(o,u){if(o&1&&(l(0,"div",5),a(1),r()),o&2){let t=u.$implicit,e=u.$index,n=w();I(n.itemBgColor()),_("animate-pulse",e===0),i(),m(" ",t," ")}}var N=(()=>{class o{title=p.required();queue=p.required();titleColor=p("text-ps-primary-blue");itemBgColor=p("bg-ps-secondary-blue");static \u0275fac=function(e){return new(e||o)};static \u0275cmp=d({type:o,selectors:[["ps-task-queue"]],inputs:{title:[1,"title"],queue:[1,"queue"],titleColor:[1,"titleColor"],itemBgColor:[1,"itemBgColor"]},decls:7,vars:4,consts:[[1,"bg-ps-background-secondary","border-ps-primary-blue","shadow-retro","flex","h-full","flex-col","rounded-lg","border-2","p-4"],[1,"mb-4","text-lg","font-bold"],[1,"flex","flex-1","flex-col","gap-2","overflow-y-auto"],[1,"text-ps-text-muted","py-8","text-center","italic"],[1,"border-ps-accent-gray","rounded","border-2","px-4","py-3","font-mono","text-sm","shadow-sm",3,"class","animate-pulse"],[1,"border-ps-accent-gray","rounded","border-2","px-4","py-3","font-mono","text-sm","shadow-sm"]],template:function(e,n){e&1&&(l(0,"div",0)(1,"h3",1),a(2),r(),l(3,"div",2),v(4,z,2,0,"div",3),y(5,L,2,5,"div",4,x),r()()),e&2&&(i(),I(n.titleColor()),i(),D(n.title()),i(2),k(n.queue().length===0?4:-1),i(),h(n.queue()))},encapsulation:2,changeDetection:0})}return o})();var O=(()=>{class o{steps=[{type:"console",action:"log",value:"Starting execution...",description:"Program starts"},{type:"call-stack",action:"push",value:"console.log(1)",description:"Push console.log(1) to call stack"},{type:"console",action:"log",value:"1",description:"Execute console.log(1)"},{type:"call-stack",action:"pop",value:"console.log(1)",description:"Pop console.log(1) from call stack"},{type:"call-stack",action:"push",value:"setTimeout",description:"Push setTimeout to call stack"},{type:"macrotask",action:"queue",value:"() => console.log('2')",description:"Queue setTimeout callback to macrotask queue"},{type:"call-stack",action:"pop",value:"setTimeout",description:"Pop setTimeout from call stack"},{type:"call-stack",action:"push",value:"Promise.resolve",description:"Push Promise.resolve to call stack"},{type:"microtask",action:"queue",value:"() => console.log('3')",description:"Queue promise callback to microtask queue"},{type:"call-stack",action:"pop",value:"Promise.resolve",description:"Pop Promise.resolve from call stack"},{type:"microtask",action:"dequeue",value:"() => console.log('3')",description:"Call stack empty - dequeue microtask"},{type:"call-stack",action:"push",value:"console.log('3')",description:"Push console.log('3') to call stack"},{type:"console",action:"log",value:"3",description:"Execute console.log('3')"},{type:"call-stack",action:"pop",value:"console.log('3')",description:"Pop console.log('3') from call stack"},{type:"macrotask",action:"dequeue",value:"() => console.log('2')",description:"Microtask queue empty - dequeue macrotask"},{type:"call-stack",action:"push",value:"console.log('2')",description:"Push console.log('2') to call stack"},{type:"console",action:"log",value:"2",description:"Execute console.log('2')"},{type:"call-stack",action:"pop",value:"console.log('2')",description:"Pop console.log('2') from call stack"},{type:"console",action:"log",value:"Execution complete!",description:"All queues empty - execution complete"}];currentStepIndex=g(0);callStack=g([]);microtaskQueue=g([]);macrotaskQueue=g([]);consoleOutput=g([]);state=C(()=>({callStack:this.callStack(),microtaskQueue:this.microtaskQueue(),macrotaskQueue:this.macrotaskQueue(),consoleOutput:this.consoleOutput(),currentStep:this.currentStepIndex(),isComplete:this.currentStepIndex()>=this.steps.length}));currentDescription=C(()=>{let t=this.currentStepIndex();return t<this.steps.length?this.steps[t].description:"Complete"});canStepForward=C(()=>this.currentStepIndex()<this.steps.length);canStepBackward=C(()=>this.currentStepIndex()>0);stepForward(){if(!this.canStepForward())return;let t=this.steps[this.currentStepIndex()];this.applyStep(t),this.currentStepIndex.update(e=>e+1)}stepBackward(){if(!this.canStepBackward())return;this.currentStepIndex.update(e=>e-1);let t=this.steps[this.currentStepIndex()];this.reverseStep(t)}reset(){this.currentStepIndex.set(0),this.callStack.set([]),this.microtaskQueue.set([]),this.macrotaskQueue.set([]),this.consoleOutput.set([])}applyStep(t){switch(t.type){case"call-stack":t.action==="push"?this.callStack.update(e=>[...e,t.value]):t.action==="pop"&&this.callStack.update(e=>e.slice(0,-1));break;case"microtask":t.action==="queue"?this.microtaskQueue.update(e=>[...e,t.value]):t.action==="dequeue"&&this.microtaskQueue.update(e=>e.slice(1));break;case"macrotask":t.action==="queue"?this.macrotaskQueue.update(e=>[...e,t.value]):t.action==="dequeue"&&this.macrotaskQueue.update(e=>e.slice(1));break;case"console":t.action==="log"&&this.consoleOutput.update(e=>[...e,t.value]);break}}reverseStep(t){switch(t.type){case"call-stack":t.action==="push"?this.callStack.update(e=>e.slice(0,-1)):t.action==="pop"&&this.callStack.update(e=>[...e,t.value]);break;case"microtask":t.action==="queue"?this.microtaskQueue.update(e=>e.slice(0,-1)):t.action==="dequeue"&&this.microtaskQueue.update(e=>[t.value,...e]);break;case"macrotask":t.action==="queue"?this.macrotaskQueue.update(e=>e.slice(0,-1)):t.action==="dequeue"&&this.macrotaskQueue.update(e=>[t.value,...e]);break;case"console":t.action==="log"&&this.consoleOutput.update(e=>e.slice(0,-1));break}}static \u0275fac=function(e){return new(e||o)};static \u0275prov=M({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var xe=(()=>{class o{executionService=P(O);state=this.executionService.state;currentDescription=this.executionService.currentDescription;canStepForward=this.executionService.canStepForward;canStepBackward=this.executionService.canStepBackward;isPlaying=g(!1);playInterval=null;code=`console.log(1);

setTimeout(() => {
  console.log('2');
}, 0);

Promise.resolve().then(() => {
  console.log('3');
});`;stepForward(){this.executionService.stepForward()}stepBackward(){this.executionService.stepBackward()}play(){this.isPlaying()||(this.isPlaying.set(!0),this.playInterval=window.setInterval(()=>{if(!this.canStepForward()){this.pause();return}this.stepForward()},1e3))}pause(){this.isPlaying.set(!1),this.playInterval!==null&&(clearInterval(this.playInterval),this.playInterval=null)}reset(){this.pause(),this.executionService.reset()}togglePlayPause(){this.isPlaying()?this.pause():this.play()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=d({type:o,selectors:[["ps-js-engine-app"]],decls:30,vars:10,consts:[[1,"bg-ps-background","flex","h-full","w-full","flex-col","gap-4","p-6"],[1,"bg-ps-background-secondary","border-ps-primary-yellow","flex","flex-col","items-center","gap-y-10","rounded-lg","border-2","p-4"],[1,"text-ps-primary-yellow","text-2xl","font-bold"],[1,"flex","gap-2"],["variant","primary",3,"clicked","disabled"],["variant","success",3,"clicked"],["variant","danger",3,"clicked"],[1,"bg-ps-secondary-yellow","border-ps-primary-orange","rounded-lg","border-2","p-4","text-center","shadow-sm"],[1,"text-ps-text","text-lg","font-semibold"],[1,"text-ps-primary-orange"],[1,"grid","min-h-0","flex-1","grid-cols-2","gap-4"],[1,"flex","min-h-0","flex-col","gap-4"],[1,"min-h-0","flex-1"],[3,"code"],[3,"output"],[1,"flex","min-h-0","gap-4"],[1,"w-1/2"],[3,"stack"],[1,"flex","w-1/2","flex-col","gap-3"],["title","Macrotask Queue","titleColor","text-ps-primary-red","itemBgColor","bg-ps-secondary-red",1,"h-1/2",3,"queue"],["title","Microtask Queue","titleColor","text-ps-accent-green","itemBgColor","bg-ps-accent-green/20",1,"h-1/2",3,"queue"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"h2",2),a(3," JavaScript Event Loop Visualizer "),c(),s(4,"div",3)(5,"ps-button",4),S("clicked",function(){return n.stepBackward()}),a(6," Previous "),c(),s(7,"ps-button",5),S("clicked",function(){return n.togglePlayPause()}),a(8),c(),s(9,"ps-button",4),S("clicked",function(){return n.stepForward()}),a(10," Next "),c(),s(11,"ps-button",6),S("clicked",function(){return n.reset()}),a(12," Reset "),c()()(),s(13,"div",7)(14,"p",8)(15,"span",9),a(16),c(),a(17),c()(),s(18,"div",10)(19,"div",11)(20,"div",12),b(21,"ps-code-display",13),c(),s(22,"div",12),b(23,"ps-console-output",14),c()(),s(24,"div",15)(25,"div",16),b(26,"ps-call-stack",17),c(),s(27,"div",18),b(28,"ps-task-queue",19)(29,"ps-task-queue",20),c()()()()),e&2&&(i(5),f("disabled",!n.canStepBackward()),i(3),m(" ",n.isPlaying()?"Pause":"Play"," "),i(),f("disabled",!n.canStepForward()),i(7),m("Step ",n.state().currentStep+1,":"),i(),m(" ",n.currentDescription()," "),i(4),f("code",n.code),i(2),f("output",n.state().consoleOutput),i(3),f("stack",n.state().callStack),i(2),f("queue",n.state().macrotaskQueue),i(),f("queue",n.state().microtaskQueue))},dependencies:[Q,T,N,F,B],encapsulation:2,changeDetection:0})}return o})();export{xe as JsEngineAppComponent};
