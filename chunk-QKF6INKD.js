import{h as x,r as d,s as F,t as I,v as T}from"./chunk-MLP6DRXD.js";import"./chunk-K66EXUFO.js";import"./chunk-ZNY4EBEK.js";import"./chunk-2W377MUZ.js";import{e as w,l as M}from"./chunk-VLPVFQJS.js";import{Ab as m,Ba as h,Ia as r,Mb as v,Ob as y,Tb as b,Z as k,Za as l,da as s,gc as C,hc as D,ib as g,pb as a,qb as c,ra as f,rb as u,sb as _}from"./chunk-VXUXNVNJ.js";var P=(()=>{class t{platformId=s(h);isBrowser=M(this.platformId);isTouchDevice=this.detectTouchDevice();detectTouchDevice(){return this.isBrowser?"ontouchstart"in window||navigator.maxTouchPoints>0:!1}static \u0275fac=function(n){return new(n||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var S=t=>({"font-bold":t}),j=t=>({"bg-secondary-blue text-white":t}),E=(()=>{class t{static nextId=0;platformService=s(P);id=`ps-desktop-icon-${t.nextId++}`;name=D.required();icon=D.required();open=C();isFocused=f(!1);position=f({x:0,y:0});onFocus(){this.isFocused.set(!0)}onBlur(){this.isFocused.set(!1)}onKeyDown(o){o.key==="Enter"&&(o.stopPropagation(),this.isFocused.set(!1),this.open.emit())}onDragEnded(o){let{x:n,y:e}=o.source.getFreeDragPosition();this.position.set({x:n,y:e})}onClick(o){o.stopPropagation(),this.platformService.isTouchDevice?(this.isFocused.set(!1),this.open.emit()):this.isFocused.set(!0)}onDoubleClick(o){o.stopPropagation(),this.isFocused.set(!1),this.open.emit()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=l({type:t,selectors:[["ps-desktop-icon"]],inputs:{name:[1,"name"],icon:[1,"icon"]},outputs:{open:"open"},decls:5,vars:13,consts:[["cdkDrag","","data-testid","button","aria-roledescription","Desktop item","type","button",1,"flex","max-w-16","cursor-pointer","flex-col","items-center","gap-1","p-1","outline-none","focus:outline-none","focus-visible:outline-none",3,"cdkDragEnded","focus","blur","keydown","click","dblclick","ngClass","cdkDragFreeDragPosition"],["data-testid","icon",1,"text-window-border","h-10","w-10","sm:h-12","sm:w-12",3,"icon"],[1,"flex","h-[14px]","items-center","justify-center","rounded-sm","px-1","py-0.5","text-center","transition-all","duration-100","ease-in",3,"ngClass"],["data-testid","name",1,"select-none","whitespace-nowrap","text-xs","font-semibold"]],template:function(n,e){n&1&&(c(0,"button",0),m("cdkDragEnded",function(i){return e.onDragEnded(i)})("focus",function(){return e.onFocus()})("blur",function(){return e.onBlur()})("keydown",function(i){return e.onKeyDown(i)})("click",function(i){return e.onClick(i)})("dblclick",function(i){return e.onDoubleClick(i)}),_(1,"ps-icon",1),c(2,"div",2)(3,"span",3),v(4),u()()()),n&2&&(a("ngClass",b(9,S,e.isFocused()))("cdkDragFreeDragPosition",e.position()),g("aria-label",e.name())("aria-selected",e.isFocused()?"true":"false")("aria-describedby",e.id+"-label"),r(),a("icon",e.icon()),r(),a("ngClass",b(11,j,e.isFocused())),r(),g("id",e.id+"-label"),r(),y(" ",e.name()," "))},dependencies:[w,x,T],encapsulation:2,changeDetection:0})}return t})();var te=(()=>{class t{AppId=d;windowManager=s(I);appRegistry=s(F);resumeApp=this.appRegistry.getApp(d.Resume);jsEngineApp=this.appRegistry.getApp(d.JsEngine);coinMasterApp=this.appRegistry.getApp(d.CoinMaster);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=l({type:t,selectors:[["ps-desktop-manager"]],decls:5,vars:1,consts:[["data-testid","desktopManager",1,"relative","h-full","w-full"],[1,"absolute","right-0","top-0"],[1,"flex","flex-col","gap-4","p-2","sm:gap-6","sm:p-4"],["name","Coin Master",3,"open","icon"]],template:function(n,e){n&1&&(c(0,"div",0)(1,"div",1)(2,"ul",2)(3,"li")(4,"ps-desktop-icon",3),m("open",function(){return e.windowManager.openApp(e.coinMasterApp.id)}),u()()()()()),n&2&&(r(4),a("icon",e.coinMasterApp.metadata.icon))},dependencies:[E],styles:['.folder[_ngcontent-%COMP%]{position:relative;width:60px;height:40px;background:#f9c441;border:2px solid #000;border-radius:2px;box-shadow:2px 2px #000}.folder[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-11px;left:-2px;border:2px solid #000;height:14px;width:30px;z-index:-1;background:#f9c441}'],changeDetection:0})}return t})();export{te as DesktopManagerComponent};
