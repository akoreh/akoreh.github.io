import{l as w}from"./chunk-WSO2QVS5.js";import{a as N,b as P,d as R}from"./chunk-KXTMMWLN.js";import"./chunk-QHARAMKU.js";import{b as f,d as F,e as y,f as T,h as C,j as A,k as E,l as b,n as L}from"./chunk-4Z7WS5KL.js";import{d as k,f as j}from"./chunk-5RVANUM6.js";import{a as S}from"./chunk-VMZW6L7S.js";import"./chunk-NJPGD756.js";import{Cb as c,Eb as x,La as a,Ob as m,Pb as v,Qb as G,_a as g,ba as _,ga as D,ha as q,lb as s,mb as p,rb as h,sa as M,sb as o,tb as r,ub as d,zb as V}from"./chunk-G7STBN2K.js";function H(e,i){e&1&&(o(0,"ps-form-field-error"),m(1," The email is required "),r())}function J(e,i){e&1&&(o(0,"ps-form-field-error"),m(1," The email is invalid "),r())}function K(e,i){e&1&&(o(0,"ps-form-field-error"),m(1," The password is required "),r())}function O(e,i){e&1&&(o(0,"p",4),m(1),r()),e&2&&(a(),v(i))}var B=(()=>{class e{form=new T({email:new C(null,[f.required,f.email]),password:new C(null,[f.required])});authStore=_(w);onSubmit(){if(this.form.invalid)return;let{email:l,password:n}=this.form.getRawValue();this.authStore.login({email:l,password:n})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=g({type:e,selectors:[["ps-login-form"]],decls:13,vars:5,consts:[[1,"flex","flex-col","gap-y-11",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-y-6"],["name","email","placeholder","Email","formControlName","email"],["name","password","placeholder","Password","formControlName","password","type","password"],[1,"-mt-4","text-center","text-sm","text-red-500"],[1,"flex","w-full","justify-center"],["btnType","submit","loader","",3,"loading"]],template:function(n,t){if(n&1&&(o(0,"form",0),c("ngSubmit",function(){return t.onSubmit()}),o(1,"div",1)(2,"ps-form-field"),d(3,"ps-input",2),s(4,H,2,0,"ps-form-field-error")(5,J,2,0,"ps-form-field-error"),r(),o(6,"ps-form-field"),d(7,"ps-input",3),s(8,K,2,0,"ps-form-field-error"),r()(),s(9,O,2,1,"p",4),o(10,"div",5)(11,"ps-button",6),m(12," Login "),r()()()),n&2){let u;h("formGroup",t.form),a(4),p(t.form.controls.email.errors!=null&&t.form.controls.email.errors.required?4:t.form.controls.email.errors!=null&&t.form.controls.email.errors.email?5:-1),a(4),p(t.form.controls.password.errors!=null&&t.form.controls.password.errors.required?8:-1),a(),p((u=t.authStore.error())?9:-1,u),a(2),h("loading",t.authStore.isLoading())}},dependencies:[L,A,F,y,b,E,N,P,R,S],encapsulation:2,changeDetection:0})}return e})();function z(e){return!(j(e)||!k(e)||e.length<8||!/[A-Z]/.test(e)||!/[a-z]/.test(e)||!/[0-9]/.test(e)||!/[!@#$%^&*(),.?":{}|<>_\-+=[\]\\/'`~;]/.test(e))}function Y(){return e=>{let i=e.value;return z(i)?null:{password:!0}}}function Q(e,i){e&1&&(o(0,"ps-form-field-error"),m(1," The email is required "),r())}function U(e,i){e&1&&(o(0,"ps-form-field-error"),m(1," The email is invalid "),r())}function W(e,i){e&1&&(o(0,"ps-form-field-error"),m(1," The password is required "),r())}function X(e,i){e&1&&(o(0,"ps-form-field-error"),m(1," Password must be at least 8 characters with uppercase, lowercase, number, and special character "),r())}function ee(e,i){e&1&&(o(0,"ps-form-field-error"),m(1," Please confirm your password "),r())}function te(e,i){e&1&&(o(0,"ps-form-field-error"),m(1," Passwords do not match "),r())}function oe(e,i){e&1&&(o(0,"p",5),m(1),r()),e&2&&(a(),v(i))}var Z=(()=>{class e{form=new T({email:new C(null,[f.required,f.email]),password:new C(null,[f.required,Y()]),confirmPassword:new C(null,[f.required])});authStore=_(w);onSubmit(){if(this.form.invalid)return;let{email:l,password:n,confirmPassword:t}=this.form.getRawValue();if(n!==t){this.form.controls.confirmPassword.setErrors({mismatch:!0});return}this.authStore.register({email:l,password:n})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=g({type:e,selectors:[["ps-register-form"]],decls:18,vars:6,consts:[[1,"flex","flex-col","gap-y-11",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-y-6"],["name","email","placeholder","Email","formControlName","email"],["name","password","placeholder","Password","formControlName","password","type","password"],["name","confirmPassword","placeholder","Confirm Password","formControlName","confirmPassword","type","password"],[1,"-mt-4","text-center","text-sm","text-red-500"],[1,"flex","w-full","justify-center"],["btnType","submit","loader","",3,"loading"]],template:function(n,t){if(n&1&&(o(0,"form",0),c("ngSubmit",function(){return t.onSubmit()}),o(1,"div",1)(2,"ps-form-field"),d(3,"ps-input",2),s(4,Q,2,0,"ps-form-field-error")(5,U,2,0,"ps-form-field-error"),r(),o(6,"ps-form-field"),d(7,"ps-input",3),s(8,W,2,0,"ps-form-field-error")(9,X,2,0,"ps-form-field-error"),r(),o(10,"ps-form-field"),d(11,"ps-input",4),s(12,ee,2,0,"ps-form-field-error")(13,te,2,0,"ps-form-field-error"),r()(),s(14,oe,2,1,"p",5),o(15,"div",6)(16,"ps-button",7),m(17," Register "),r()()()),n&2){let u;h("formGroup",t.form),a(4),p(t.form.controls.email.errors!=null&&t.form.controls.email.errors.required?4:t.form.controls.email.errors!=null&&t.form.controls.email.errors.email?5:-1),a(4),p(t.form.controls.password.errors!=null&&t.form.controls.password.errors.required?8:t.form.controls.password.errors!=null&&t.form.controls.password.errors.password?9:-1),a(4),p(t.form.controls.confirmPassword.errors!=null&&t.form.controls.confirmPassword.errors.required?12:t.form.controls.confirmPassword.errors!=null&&t.form.controls.confirmPassword.errors.mismatch?13:-1),a(2),p((u=t.authStore.error())?14:-1,u),a(2),h("loading",t.authStore.isLoading())}},dependencies:[L,A,F,y,b,E,N,P,R,S],encapsulation:2,changeDetection:0})}return e})();function re(e,i){if(e&1){let l=V();o(0,"div",1)(1,"p",2),m(2),r(),o(3,"ps-button",3),c("clicked",function(){D(l);let t=x();return q(t.authStore.logout())}),m(4," Logout "),r()()}if(e&2){let l=x();a(2),G("You are logged in as ",l.authStore.email())}}function ne(e,i){e&1&&d(0,"ps-login-form")}function ie(e,i){e&1&&d(0,"ps-register-form")}function le(e,i){e&1&&m(0," Don't have an account? Register ")}function me(e,i){e&1&&m(0," Already have an account? Login ")}function ae(e,i){if(e&1){let l=V();s(0,ne,1,0,"ps-login-form")(1,ie,1,0,"ps-register-form"),o(2,"button",4),c("click",function(){D(l);let t=x();return q(t.switchMode())}),s(3,le,1,0)(4,me,1,0),r()}if(e&2){let l=x();p(l.isLogin()?0:1),a(3),p(l.isLogin()?3:4)}}var Be=(()=>{class e{authStore=_(w);isLogin=M(!0);switchMode(){this.isLogin.update(l=>!l)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=g({type:e,selectors:[["ps-auth-app"]],hostAttrs:[1,"flex-1"],decls:3,vars:1,consts:[[1,"flex","h-full","w-full","flex-col","items-center","gap-y-4","p-4"],[1,"flex","flex-col","items-center","gap-y-6"],[1,"text-lg"],["variant","danger",3,"clicked"],["type","button",1,"text-sm","text-blue-600","underline","hover:text-blue-800",3,"click"]],template:function(n,t){n&1&&(o(0,"div",0),s(1,re,5,1,"div",1)(2,ae,5,2),r()),n&2&&(a(),p(t.authStore.isAuthenticated()?1:2))},dependencies:[B,Z,S],encapsulation:2,changeDetection:0})}return e})();export{Be as AuthAppComponent};
