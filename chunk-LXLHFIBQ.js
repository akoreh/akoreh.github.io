import{h as C,i as D,s as d,t as I,u as M,w as F}from"./chunk-VPTTNW5A.js";import"./chunk-K66EXUFO.js";import"./chunk-HMKHSG36.js";import"./chunk-3LM2PHH3.js";import{e as x}from"./chunk-Q2JNIJVH.js";import{Db as m,La as s,Pb as v,Rb as _,Wb as h,aa as k,ab as l,ga as r,jc as w,kc as b,lb as g,sb as a,tb as c,ua as f,ub as u,vb as y}from"./chunk-YYXXHZ7Z.js";var T=(()=>{class t{isTouchDevice;isSafari;isIos;isAndroid;constructor(){this.isTouchDevice=this.detectTouchDevice(),this.isSafari=this.platform.SAFARI,this.isIos=this.platform.IOS,this.isAndroid=this.platform.ANDROID}platform=r(D);detectTouchDevice=()=>"ontouchstart"in window||navigator.maxTouchPoints>0;static \u0275fac=function(n){return new(n||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var P=t=>({"font-bold":t}),E=t=>({"bg-secondary-blue text-white":t}),A=(()=>{class t{static nextId=0;platformService=r(T);id=`ps-desktop-icon-${t.nextId++}`;name=b.required();icon=b.required();open=w();isFocused=f(!1);position=f({x:0,y:0});onFocus(){this.isFocused.set(!0)}onBlur(){this.isFocused.set(!1)}onKeyDown(o){o.key==="Enter"&&(o.stopPropagation(),this.isFocused.set(!1),this.open.emit())}onDragEnded(o){let{x:n,y:e}=o.source.getFreeDragPosition();this.position.set({x:n,y:e})}onClick(o){o.stopPropagation(),this.platformService.isTouchDevice?(this.isFocused.set(!1),this.open.emit()):this.isFocused.set(!0)}onDoubleClick(o){o.stopPropagation(),this.isFocused.set(!1),this.open.emit()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=l({type:t,selectors:[["ps-desktop-icon"]],inputs:{name:[1,"name"],icon:[1,"icon"]},outputs:{open:"open"},decls:5,vars:13,consts:[["cdkDrag","","data-testid","button","aria-roledescription","Desktop item","type","button",1,"flex","max-w-16","cursor-pointer","flex-col","items-center","gap-1","p-1","outline-none","focus:outline-none","focus-visible:outline-none",3,"cdkDragEnded","focus","blur","keydown","click","dblclick","ngClass","cdkDragFreeDragPosition"],["data-testid","icon",1,"text-window-border","h-10","w-10","sm:h-12","sm:w-12",3,"icon"],[1,"flex","h-[14px]","items-center","justify-center","rounded-sm","px-1","py-0.5","text-center","transition-all","duration-100","ease-in",3,"ngClass"],["data-testid","name",1,"select-none","whitespace-nowrap","text-xs","font-semibold"]],template:function(n,e){n&1&&(c(0,"button",0),m("cdkDragEnded",function(i){return e.onDragEnded(i)})("focus",function(){return e.onFocus()})("blur",function(){return e.onBlur()})("keydown",function(i){return e.onKeyDown(i)})("click",function(i){return e.onClick(i)})("dblclick",function(i){return e.onDoubleClick(i)}),y(1,"ps-icon",1),c(2,"div",2)(3,"span",3),v(4),u()()()),n&2&&(a("ngClass",h(9,P,e.isFocused()))("cdkDragFreeDragPosition",e.position()),g("aria-label",e.name())("aria-selected",e.isFocused()?"true":"false")("aria-describedby",e.id+"-label"),s(),a("icon",e.icon()),s(),a("ngClass",h(11,E,e.isFocused())),s(),g("id",e.id+"-label"),s(),_(" ",e.name()," "))},dependencies:[x,C,F],encapsulation:2,changeDetection:0})}return t})();var oe=(()=>{class t{AppId=d;windowManager=r(M);appRegistry=r(I);resumeApp=this.appRegistry.getApp(d.Resume);jsEngineApp=this.appRegistry.getApp(d.JsEngine);coinMasterApp=this.appRegistry.getApp(d.CoinMaster);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=l({type:t,selectors:[["ps-desktop-manager"]],decls:5,vars:1,consts:[["data-testid","desktopManager",1,"relative","h-full","w-full"],[1,"absolute","right-0","top-0"],[1,"flex","flex-col","gap-4","p-2","sm:gap-6","sm:p-4"],["name","Coin Master",3,"open","icon"]],template:function(n,e){n&1&&(c(0,"div",0)(1,"div",1)(2,"ul",2)(3,"li")(4,"ps-desktop-icon",3),m("open",function(){return e.windowManager.openApp(e.coinMasterApp.id)}),u()()()()()),n&2&&(s(4),a("icon",e.coinMasterApp.metadata.icon))},dependencies:[A],styles:['.folder[_ngcontent-%COMP%]{position:relative;width:60px;height:40px;background:#f9c441;border:2px solid #000;border-radius:2px;box-shadow:2px 2px #000}.folder[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-11px;left:-2px;border:2px solid #000;height:14px;width:30px;z-index:-1;background:#f9c441}'],changeDetection:0})}return t})();export{oe as DesktopManagerComponent};
